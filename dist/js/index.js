import{gsap}from"gsap";import{ScrollTrigger}from"gsap/ScrollTrigger";import SplitType from"split-type";import{init,tick,stopTick}from"./three.js";import{loadCases}from"./cases.js";import{loadWork}from"./work.js";import{loadFooter}from"./footer.js";import{loadHeader}from"./header.js";import{localize,switchLang,getLocale}from"./localization.js";import{pagesTransitionsEx}from"./pages.js";let locale;const mobileWidth=992;function setCookie(e,o,t){const r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3);let n="expires="+r.toUTCString();document.cookie=e+"="+o+";"+n+";path=/"}function getCookie(e){let o=e+"=",t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let r=t[e];for(;" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(o))return r.substring(o.length,r.length)}return""}async function loadPage(){await loadHeader(),await loadFooter(),document.querySelectorAll("#language").forEach((e=>e.addEventListener("click",(()=>{window.location.href=window.location.pathname,locale=switchLang(e),setCookie("locale",locale,30)})))),locale=getCookie("locale"),locale||(locale="en",setCookie("locale",locale,30)),await localize(locale),new SplitType(".h1-a"),gsap.timeline().to(".word",{y:0,stagger:.17,duration:1.7,ease:"power4.out",clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"}),gsap.to(".load_anim",{y:0,delay:1.2,duration:1.2,ease:"power4.inOut",clipPath:"polygon(0% 100%, 100% 100%, 100% 0%, 0% 0%)"}),gsap.to(".showreel_wr",{width:"100%",ease:"power4.inOut",scrollTrigger:{trigger:".showreel_trig",start:"top center",end:"top top",scrub:4}});let e="#282828",o="#EDEDED",t=gsap.utils.toArray(".tech-it").map((function(t){let r=t.querySelector(".tech-it-text");gsap.set(t,{background:e,color:o,borderRadius:"50px"}),gsap.set(r,{height:"auto",opacity:1,padding:"20px"});let n=gsap.from(t,{background:o,color:e,duration:.5,ease:"sine.in"}).reverse(),i=gsap.from(r,{height:0,opacity:0,padding:0,duration:.5,ease:"sine.in"}).reverse();return function(e){t===e?(i.reversed(!i.reversed()),n.reversed(!n.reversed())):(n.reverse(),i.reverse())}}));if(document.querySelectorAll(".tech-it").forEach((e=>{e.addEventListener("click",(()=>{return o=e,void t.forEach((e=>e(o)));var o}))})),window.innerWidth<992&&setInterval((()=>{const e=gsap.utils.shuffle([...document.querySelectorAll(".char")].filter((()=>Math.random()>.97)));gsap.timeline().to(e,{color:"#87817B"}).to(e,{color:"#282828"})}),500),window.innerWidth>992){let e=!1;const o=gsap.timeline({});o.to([".menu_li"],{y:-30,opacity:0,stagger:.1,ease:"power4.in"}),o.to(".menu_btn",{y:0,opacity:1,ease:"power4.out"}),window.onscroll=function(t){const r=document.querySelector(".h1-t").getBoundingClientRect().top;e&&window.scrollY<r?(o.reverse(),e=!e):!e&&window.scrollY>=r&&self.oldScroll<self.scrollY&&(o.play(),e=!e),self.oldScroll=self.scrollY},window.addEventListener("scroll",(()=>{onscroll()})),o.pause(),document.querySelector(".menu_btn").addEventListener("click",(()=>{o.reverse(),e=!1}))}if(window.innerWidth<=992){const e=document.querySelector(".menu_btn");let o=!1;const t=gsap.timeline();e.addEventListener("click",(()=>{0==o?(e.textContent="Close -",t.to(".menu_layout",{height:"100%",display:"block",y:0,ease:"expo.InOut",duration:.7}),t.from(".menu_li_lay",{y:30,opacity:0,stagger:.1,clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",duration:.7}),o=!0):(e.textContent="Menu +",t.to(".menu_layout",{height:"0%",display:"none",y:-200,ease:"expo.InOut",duration:.7}),o=!1)}))}function r(e){return e<10&&(e="0"+e),e}"About"===document.title?(init(992),tick()):stopTick(),"Cases"===document.title&&loadCases(),"Work"===document.title&&loadWork(),document.getElementById("date_now").innerHTML=function(){const e=new Date;return r(e.getFullYear())+"."+r(e.getMonth())+"."+r(e.getDate())}(),pagesTransitionsEx(loadPage)}gsap.registerPlugin(ScrollTrigger),loadPage();